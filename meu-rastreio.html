<html lang="pt-br"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
 
    <title>Rastreio</title>

    <!-- Principal CSS do Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
    <style>
        body {
            min-height: 75rem;
            padding-top: 4.5rem;
        }
        div.status_event{
          margin-left: 3rem;
        }
        div.status_icon{
          position: absolute;
          margin-left: -64px;
          width: 32px;
          height:32px;
          top: 0;
          background: url(icons.png)  0 0;
        }
        div.status_event::before{
          content:"";
          margin-left: -36px;
          position: absolute;
          width: 2px;
          top: 36px;
          height: calc(100% - 32px);
          background: #000;
        }
        div.status_event:nth-last-child(1):before{
          display: none;
        }
    </style>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        function iconSelector(e,a){a=parseInt(a);var c="";switch((e=e.toLocaleLowerCase())+""+a){case"co5":case"co6":case"co2":c="-48px 0px";break;case"bde15":case"bdi15":case"bde45":case"bdi45":case"bdr45":case"fc10":case"par15":case"par18":case"bdr15":c="124px 0px";break;case"par16":case"par20":c="172px -188px";break;case"par10":case"par19":c="125px -188px";break;case"par13":case"bde22":case"bdi22":case"bdr22":case"fc1":case"fc47":case"par40":c="-190px -188px";break;case"bde41":case"bdi41":case"bde66":case"bdi66":case"bdr66":case"fc8":case"bde49":case"bdi49":case"bdr49":case"bde85":case"bdi85":case"bdr85":case"est1":case"est2":case"est3":case"est4":case"est5":case"est6":case"est9":case"bde57":case"bdi57":case"bdr57":case"bde58":case"bdi58":case"bdr58":case"bde59":case"bdi59":case"bdr59":case"bde84":case"bdi84":case"bdr84":case"bde46":case"bdi46":case"par24":case"bdr46":case"bde87":case"bdi87":case"bdr87":case"bde86":case"bdi86":case"bdr86":case"bde32":case"bdi32":case"bdr32":case"fc2":case"bde56":case"bdi56":case"bdr56":case"fc42":case"bde42":case"bdi42":case"bdr42":case"bde14":case"bdi14":case"bdr14":case"bde9":case"bde69":case"bdi9":case"bdi69":case"bdr9":case"bdr69":case"bde38":case"bdi38":case"bdr38":case"bdr64":case"bde55":case"bdi55":case"bdr55":case"blq1":case"blq5":case"blq11":case"blq21":case"blq22":case"bdr79":case"bde79":case"co14":case"co3":case"blq61":case"blq44":case"blq54":case"blq24":case"co10":case"par27":case"fc55":case"bde61":case"bdi61":case"bdr61":case"bde53":case"bdi53":case"bdr53":case"fc3":case"co13":case"co11":case"blq31":case"co1":case"fc11":case"bdr41":c="-238px -141px";break;case"bde5":case"bde39":case"bdi5":case"bdi39":case"bdr5":case"bdr39":case"bde33":case"bdi33":case"bdr33":case"bde34":case"co9":case"bdi34":case"blq4":case"blq41":case"blq42":case"bde4":case"bdi4":case"bdr4":case"blq30":case"bde35":case"bde36":case"bdi35":case"bdi36":case"bdr35":case"bdr36":case"bde7":case"bde8":case"bde19":case"bdi7":case"bdi8":case"bdi19":case"bdr7":case"bdr8":case"bdr19":case"fc4":case"bde30":case"bdi30":case"bdr30":case"bde47":case"bdi47":case"bdr47":case"bde25":case"bdi25":case"bdr25":case"fc7":case"bdr34":c="2px -92px";break;case"bde83":case"bdi83":case"bde26":case"bdi26":case"bdr26":case"par26":case"bde50":case"bde51":case"bde52":case"bdi50":case"bdi51":case"bdi52":case"bdr50":case"bdr51":case"bdr52":case"fc51":case"bde43":case"bdi43":case"bdr43":case"bde71":case"bdi71":case"bdr71":case"bde72":case"bdi72":case"bdr72":case"bde73":case"bdi73":case"bdr73":case"bde74":case"bdi74":case"bdr74":case"bde76":case"bdi76":case"bdr76":case"bde75":case"bdi75":case"bdr75":case"bde13":case"bdi13":case"bdr13":case"blq51":case"bde82":case"bdi82":case"bdr82":case"bde80":case"bde98":case"bdi80":case"bdr80":case"bdi98":case"bde62":case"bdi62":case"bdr62":case"bde28":case"bdi28":case"bdr28":case"bde37":case"bdi37":case"bdr37":case"bde3":case"bde12":case"bdi3":case"bdi12":case"bdr3":case"bdr12":case"fc9":case"par25":case"fc41":case"bdr83":c="-286px -92px";break;case"bde54":case"bdi54":case"bdr54":case"par23":case"fc31":case"par32":case"co12":case"co7":case"bde44":case"bdi44":case"bdr44":case"par11":case"par17":case"bde77":case"bdi77":case"bdr77":case"ldi1":case"ldi3":case"ldi4":case"bde60":case"bdi60":case"bdr60":case"par12":c="30px -140px";break;case"bde2":case"bde18":case"bde20":case"bde21":case"bdi2":case"bdi18":case"bdi20":case"bdi21":case"bdr2":case"bdr18":case"bde10":case"bdi10":case"bdr10":case"bdr20":case"bde29":case"bdi29":case"bdr29":case"bde89":case"bdi89":case"bdr89":case"bdr21":c="30px 130px";break;case"bde6":case"bdi6":case"bdr6":case"bde40":case"bdi40":case"bdr40":case"bde81":case"bdi81":case"bde48":case"bdi48":case"bdr48":case"bdr81":c="318px 130px";break;case"fc13":case"fc19":case"fc12":case"fc35":case"fc37":case"fc32":case"fc33":case"fc24":case"fc34":case"par22":case"par21":c="270px 130px";break;case"po1":case"po9":c="-96px -48px";break;case"par28":c="366px 32px";break;case"bde1":case"bde67":case"bde70":case"bdi1":case"bdi67":case"bdi70":case"bdr1":case"bdr67":case"bde23":case"bdi23":case"bdr23":case"bde68":case"bdi68":case"bdr68":case"par42":case"par34":case"bde24":case"bdi24":case"bdr24":case"ldi2":case"c08":case"bdr70":c="-48px -46px";break;case"bdr31":case"par31":case"par33":case"bdr63":case"par14":case"par30":case"par41":case"fc26":c="318px 77px";break;case"do1":case"do2":case"ro1":case"fc29":case"fc27":case"ldi11":case"ldi13":case"co4":case"ldi14":c="-94px -190px";default:"-288px -47px"}return c}
        function getData(rastreio){
            $.ajax({
                type: "POST",
                url: "https://correios.contrateumdev.com.br/api/rastreio",
                data: JSON.stringify({"code":rastreio,"type":"LS"}),
                dataType:"json",
                contentType: 'application/json',
                success: function(response){
                    console.log(response);
                    populateResult(response);
                }
            });
        }
        function isValid(variable){
          if(variable !== undefined || variable !== null) {
              return variable
          }else{
            return ""
          }
        }
        function populateResult(res){
          var body = "";
          for(var i = 0;i < res.objeto.length;i++){
              var obj = res.objeto[i];
              var events = "";
              for(var j = 0;j < obj.evento.length;j++){
                var event = obj.evento[j];
                
                events += "<div data-event=\""+event.tipo+event.status+"\" class=\"status_event card mb-2\"><div class=\"card-body\"><div class=\"status_icon\" style=\"background-position:"+iconSelector(event.tipo,event.status)+"\"></div><h6>"+event.descricao+"</h6><div>"+(event.unidade !== undefined ? "<span>De: </span><span>"+event.unidade.local+"</span>" : "")+(event.unidade.endereco.cep !== undefined ? "<div><span>Endereço: </span><span>"+event.unidade.endereco.bairro+" - "+event.unidade.endereco.uf+" | "+event.unidade.endereco.cep+" | "+event.unidade.endereco.logradouro+"</span></div>" : "")+"</div>"+
                (event.destino !== undefined ? "<div><span>Para: </span><span>"+event.destino[0].local+"</span>"+(event.destino[0].endereco.cep !== undefined ? "<div><span>Endereço: </span><span>"+event.destino[0].endereco.bairro+" - "+event.destino[0].endereco.uf+" | "+event.destino[0].endereco.cep+" | "+event.destino[0].endereco.logradouro+"</span></div>" : "")+"</div>":"")+"</div></div>";
                if(event.destino !== undefined){console.log(event.destino[0].local);}
              }
              body += "<div class=\"card text-left\"><div class=\"card-header\">"+obj.categoria+" | "+obj.nome+"</div><div class=\"card-body\"><h5 class=\"card-title mb-4\">"+obj.numero+"</h5><div class=\"eventos\">"+events+"</div></div><div class=\"card-footer text-muted\">Última atualização: "+obj.evento[0].data+" - "+obj.evento[0].hora+"</div></div>";
          }
          $("#rastreios").append(body);
        }
        $(function(){
            $("#rastreio").on("submit",function(e){
                e.preventDefault();
                getData($("#codigo").val());
            });
        });
        
    </script>
</head>

  <body>

    <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
      <a class="navbar-brand" href="#">Navbar fixo</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarCollapse">
        <form id="rastreio" class="form-inline d-flex mb-0 mt-2 mt-md-0">
          <input id="codigo" class="form-control mr-sm-2" type="text" placeholder="LE382521817SE" aria-label="Search">
          <button class="btn btn-outline-success my-2 my-sm-0" type="submit">RASTREAR</button>
        </form>
      </div>
    </nav>

    <main role="main" class="container">
      <div class="jumbotron">
        <h1>Rastreio</h1>
        <div id="rastreios"></div>
      </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"></script>


</body></html>